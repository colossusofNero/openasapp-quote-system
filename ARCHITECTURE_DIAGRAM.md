# OpenAsApp System Architecture Diagram

## Complete System Overview

```
┌────────────────────────────────────────────────────────────────────────────────┐
│                              OPENASAPP SYSTEM                                  │
│                    Quote Management + PDF Parser + ChatGPT                     │
└────────────────────────────────────────────────────────────────────────────────┘


┌─────────────────────────────── USER LAYER ────────────────────────────────────┐
│                                                                                │
│   ┌──────────────┐    ┌──────────────┐    ┌──────────────┐                  │
│   │   Web App    │    │   ChatGPT    │    │  Mobile      │                  │
│   │   Browser    │    │   Interface  │    │  (Future)    │                  │
│   └──────┬───────┘    └──────┬───────┘    └──────────────┘                  │
│          │                   │                                                 │
└──────────┼───────────────────┼─────────────────────────────────────────────────┘
           │                   │
           │                   │ OAuth 2.0
           │                   │
┌──────────▼───────────────────▼───── FRONTEND LAYER ───────────────────────────┐
│                         Next.js 14 App Router                                  │
│                                                                                │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                          Pages & Routes                                  │ │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌─────────┐  │ │
│  │  │   Home   │  │  Quotes  │  │Templates │  │    PDF   │  │Settings │  │ │
│  │  │Dashboard │  │   List   │  │  Manager │  │  Parser  │  │  Panel  │  │ │
│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘  └─────────┘  │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                                │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                        React Components                                  │ │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌─────────┐  │ │
│  │  │  Quote   │  │  Quote   │  │ Template │  │    PDF   │  │  Export │  │ │
│  │  │   Form   │  │  Table   │  │  Builder │  │  Upload  │  │  Dialog │  │ │
│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘  └─────────┘  │ │
│  │                                                                          │ │
│  │  ┌──────────────────────────────────────────────────────────────────┐  │ │
│  │  │                      UI Component Library                         │  │ │
│  │  │  Button | Input | Select | Dialog | Table | Card | Badge | ...  │  │ │
│  │  │                   (shadcn/ui + Tailwind CSS)                      │  │ │
│  │  └──────────────────────────────────────────────────────────────────┘  │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                                │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                        State Management (Zustand)                        │ │
│  │  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐       │ │
│  │  │Quote Store │  │ User Store │  │ UI Store   │  │ App Store  │       │ │
│  │  └────────────┘  └────────────┘  └────────────┘  └────────────┘       │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
└────────────────────────────────┬───────────────────────────────────────────────┘
                                 │
                                 │ HTTP/REST
                                 │
┌────────────────────────────────▼───── API LAYER ──────────────────────────────┐
│                         Next.js API Routes (Serverless)                        │
│                                                                                │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                        Authentication Layer                              │ │
│  │  ┌────────────────────────────────────────────────────────────────────┐ │ │
│  │  │  NextAuth.js  │  JWT Tokens  │  OAuth 2.0  │  Session Management  │ │ │
│  │  └────────────────────────────────────────────────────────────────────┘ │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                                │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                            API Endpoints                                 │ │
│  │                                                                          │ │
│  │  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐           │ │
│  │  │  Quote API     │  │ Template API   │  │  User API      │           │ │
│  │  │  /api/quotes   │  │ /api/templates │  │  /api/users    │           │ │
│  │  │  - GET (list)  │  │  - GET (list)  │  │  - GET (me)    │           │ │
│  │  │  - POST (create)│  │  - POST (create)│  │  - PUT (update)│          │ │
│  │  │  - PUT (update)│  │  - PUT (update)│  │                │           │ │
│  │  │  - DELETE      │  │  - DELETE      │  │                │           │ │
│  │  └────────────────┘  └────────────────┘  └────────────────┘           │ │
│  │                                                                          │ │
│  │  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐           │ │
│  │  │   PDF API      │  │  Export API    │  │  Upload API    │           │ │
│  │  │  /api/pdf      │  │ /api/export    │  │  /api/upload   │           │ │
│  │  │  - parse       │  │  - pdf         │  │  - file        │           │ │
│  │  │  - extract     │  │  - excel       │  │  - image       │           │ │
│  │  └────────────────┘  └────────────────┘  └────────────────┘           │ │
│  │                                                                          │ │
│  │  ┌────────────────┐  ┌────────────────┐                                │ │
│  │  │   GPT Actions  │  │  OAuth API     │                                │ │
│  │  │  /api/gpt      │  │ /api/oauth     │                                │ │
│  │  │  - quote/create│  │  - authorize   │                                │ │
│  │  │  - quote/list  │  │  - token       │                                │ │
│  │  │  - pdf/parse   │  │  - refresh     │                                │ │
│  │  └────────────────┘  └────────────────┘                                │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                                │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                         API Middleware                                   │ │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌─────────┐  │ │
│  │  │   Auth   │  │Validation│  │   Rate   │  │  Error   │  │ Logging │  │ │
│  │  │  Check   │  │  (Zod)   │  │Limiting  │  │ Handler  │  │         │  │ │
│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘  └─────────┘  │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
└────────────────────────────────┬───────────────────────────────────────────────┘
                                 │
                                 │
┌────────────────────────────────▼─── BUSINESS LOGIC LAYER ─────────────────────┐
│                          Services & Domain Logic                               │
│                                                                                │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                        Quote Engine Services                             │ │
│  │  ┌────────────────────────────────────────────────────────────────────┐ │ │
│  │  │  QuoteCalculator                                                    │ │ │
│  │  │  - Calculate line totals                                            │ │ │
│  │  │  - Apply discounts                                                  │ │ │
│  │  │  - Calculate tax                                                    │ │ │
│  │  │  - Round amounts                                                    │ │ │
│  │  │  - Currency formatting                                              │ │ │
│  │  └────────────────────────────────────────────────────────────────────┘ │ │
│  │  ┌────────────────────────────────────────────────────────────────────┐ │ │
│  │  │  FormulaEvaluator                                                   │ │ │
│  │  │  - Parse custom formulas                                            │ │ │
│  │  │  - Excel-like functions (SUM, IF, ROUND)                           │ │ │
│  │  │  - Variable substitution                                            │ │ │
│  │  └────────────────────────────────────────────────────────────────────┘ │ │
│  │  ┌────────────────────────────────────────────────────────────────────┐ │ │
│  │  │  TemplateRenderer                                                   │ │ │
│  │  │  - Render templates with variables                                  │ │ │
│  │  │  - Conditional logic                                                │ │ │
│  │  │  - Default values                                                   │ │ │
│  │  └────────────────────────────────────────────────────────────────────┘ │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                                │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                        PDF Parser Services                               │ │
│  │  ┌────────────────────────────────────────────────────────────────────┐ │ │
│  │  │  PdfParser                                                          │ │ │
│  │  │  - Extract text from PDF (pdf-parse)                               │ │ │
│  │  │  - Detect tables                                                    │ │ │
│  │  │  - Parse metadata                                                   │ │ │
│  │  └────────────────────────────────────────────────────────────────────┘ │ │
│  │  ┌────────────────────────────────────────────────────────────────────┐ │ │
│  │  │  QuoteMapper                                                        │ │ │
│  │  │  - Map parsed data to quote structure                              │ │ │
│  │  │  - Extract client info, items, totals                              │ │ │
│  │  │  - Pattern recognition                                              │ │ │
│  │  └────────────────────────────────────────────────────────────────────┘ │ │
│  │  ┌────────────────────────────────────────────────────────────────────┐ │ │
│  │  │  ExtractionValidator                                                │ │ │
│  │  │  - Validate extracted data                                          │ │ │
│  │  │  - Confidence scoring                                               │ │ │
│  │  │  - Flag for manual review                                           │ │ │
│  │  └────────────────────────────────────────────────────────────────────┘ │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                                │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                        Export Services                                   │ │
│  │  ┌────────────────────────────────────────────────────────────────────┐ │ │
│  │  │  PdfGenerator (PDFKit)                                              │ │ │
│  │  │  - Generate professional PDFs                                       │ │ │
│  │  │  - Custom branding                                                  │ │ │
│  │  │  - Table formatting                                                 │ │ │
│  │  └────────────────────────────────────────────────────────────────────┘ │ │
│  │  ┌────────────────────────────────────────────────────────────────────┐ │ │
│  │  │  ExcelExporter (ExcelJS)                                            │ │ │
│  │  │  - Generate Excel workbooks                                         │ │ │
│  │  │  - Formatted cells                                                  │ │ │
│  │  │  - Formulas                                                         │ │ │
│  │  └────────────────────────────────────────────────────────────────────┘ │ │
│  │  ┌────────────────────────────────────────────────────────────────────┐ │ │
│  │  │  EmailService (Resend)                                              │ │ │
│  │  │  - Send quote emails                                                │ │ │
│  │  │  - Attachments                                                      │ │ │
│  │  │  - HTML templates                                                   │ │ │
│  │  └────────────────────────────────────────────────────────────────────┘ │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                                │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                        Validation Services                               │ │
│  │  ┌────────────────────────────────────────────────────────────────────┐ │ │
│  │  │  QuoteValidator                                                     │ │ │
│  │  │  - Business rule validation                                         │ │ │
│  │  │  - Data integrity checks                                            │ │ │
│  │  │  - Error and warning messages                                       │ │ │
│  │  └────────────────────────────────────────────────────────────────────┘ │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
└────────────────────────────────┬───────────────────────────────────────────────┘
                                 │
                                 │
┌────────────────────────────────▼──── DATA ACCESS LAYER ───────────────────────┐
│                         Prisma ORM + Database                                  │
│                                                                                │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                          Prisma Client                                   │ │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌─────────┐  │ │
│  │  │  Quote   │  │ Template │  │   User   │  │ ParsedPdf│  │ AuditLog│  │ │
│  │  │  Model   │  │  Model   │  │  Model   │  │  Model   │  │  Model  │  │ │
│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘  └─────────┘  │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                       │                                        │
│                                       │                                        │
│  ┌────────────────────────────────────▼──────────────────────────────────┐  │
│  │                      Vercel Postgres Database                          │  │
│  │                                                                         │  │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌─────────┐│  │
│  │  │  users   │  │  quotes  │  │quote_items│ │templates │  │parsed_  ││  │
│  │  │  table   │  │  table   │  │   table   │  │  table   │  │pdf table││  │
│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘  └─────────┘│  │
│  │                                                                         │  │
│  │  ┌──────────┐  ┌──────────┐                                           │  │
│  │  │ api_keys │  │audit_logs│                                           │  │
│  │  │  table   │  │  table   │                                           │  │
│  │  └──────────┘  └──────────┘                                           │  │
│  └─────────────────────────────────────────────────────────────────────────┘ │
└────────────────────────────────────────────────────────────────────────────────┘


┌─────────────────────────────── EXTERNAL SERVICES ─────────────────────────────┐
│                                                                                │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐                 │
│  │  Vercel Blob   │  │     Resend     │  │  Sentry.io     │                 │
│  │ File Storage   │  │ Email Service  │  │Error Tracking  │                 │
│  └────────────────┘  └────────────────┘  └────────────────┘                 │
│                                                                                │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐                 │
│  │   OpenAI API   │  │Vercel Analytics│  │  GitHub Actions│                 │
│  │    ChatGPT     │  │   Monitoring   │  │     CI/CD      │                 │
│  └────────────────┘  └────────────────┘  └────────────────┘                 │
└────────────────────────────────────────────────────────────────────────────────┘


┌──────────────────────────── DEVELOPMENT INFRASTRUCTURE ───────────────────────┐
│                                                                                │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │                         Version Control & CI/CD                         │  │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌─────────┐ │  │
│  │  │  GitHub  │  │  GitHub  │  │  Vercel  │  │  Vercel  │  │ Vercel  │ │  │
│  │  │   Repo   │  │ Actions  │  │  Preview │  │   Prod   │  │ Postgres│ │  │
│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘  └─────────┘ │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                                │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │                         Testing Infrastructure                          │  │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐              │  │
│  │  │  Vitest  │  │  React   │  │Playwright│  │  Codecov │              │  │
│  │  │   Unit   │  │ Testing  │  │   E2E    │  │ Coverage │              │  │
│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘              │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
└────────────────────────────────────────────────────────────────────────────────┘
```

---

## Data Flow Diagrams

### 1. Quote Creation Flow

```
User Action                  Frontend                   API                 Business Logic           Database
    │                           │                        │                        │                      │
    │  Click "Create Quote"     │                        │                        │                      │
    ├───────────────────────────►                        │                        │                      │
    │                           │  Render QuoteForm      │                        │                      │
    │                           │                        │                        │                      │
    │  Fill Form & Submit       │                        │                        │                      │
    ├───────────────────────────►                        │                        │                      │
    │                           │  Validate (Zod)        │                        │                      │
    │                           │  POST /api/quotes      │                        │                      │
    │                           ├────────────────────────►                        │                      │
    │                           │                        │  Auth Check            │                      │
    │                           │                        │  Validate Request      │                      │
    │                           │                        ├────────────────────────►                      │
    │                           │                        │                        │  Calculate Totals    │
    │                           │                        │                        │  Generate Quote #    │
    │                           │                        │                        ├──────────────────────►
    │                           │                        │                        │                      │  Save Quote
    │                           │                        │                        │◄─────────────────────┤
    │                           │                        │◄───────────────────────┤                      │
    │                           │◄───────────────────────┤  Return Quote          │                      │
    │◄──────────────────────────┤  Show Success          │                        │                      │
    │  Navigate to Detail       │                        │                        │                      │
```

### 2. PDF Parsing Flow

```
User Action              Frontend                  API                  PDF Parser            Database
    │                       │                        │                        │                    │
    │  Upload PDF           │                        │                        │                    │
    ├───────────────────────►                        │                        │                    │
    │                       │  Show Preview          │                        │                    │
    │                       │  POST /api/pdf/parse   │                        │                    │
    │                       ├────────────────────────►                        │                    │
    │                       │                        │  Auth Check            │                    │
    │                       │                        ├────────────────────────►                    │
    │                       │                        │                        │  Extract Text      │
    │                       │                        │                        │  Parse Tables      │
    │                       │                        │                        │  Recognize Patterns│
    │                       │                        │                        │  Map to Quote      │
    │                       │                        │                        │  Validate          │
    │                       │                        │                        │  Calculate Confidence
    │                       │                        │◄───────────────────────┤                    │
    │                       │                        │  Save Parsed Data      │                    │
    │                       │                        ├────────────────────────────────────────────►
    │                       │◄───────────────────────┤  Return Parsed Data    │                    │
    │◄──────────────────────┤  Show Extracted Data   │                        │                    │
    │  Review & Correct     │  Allow Editing         │                        │                    │
    ├───────────────────────►                        │                        │                    │
    │  Create Quote         │  POST /api/quotes      │                        │                    │
    │                       ├────────────────────────►  (Follow Quote Creation Flow)               │
```

### 3. ChatGPT Integration Flow

```
ChatGPT                  OAuth Server              API                 Business Logic       Database
    │                        │                        │                        │                │
    │  User: "Create quote"  │                        │                        │                │
    │  (First time)          │                        │                        │                │
    ├────────────────────────►                        │                        │                │
    │                        │  GET /oauth/authorize  │                        │                │
    │                        ├────────────────────────►                        │                │
    │                        │                        │  Check if logged in    │                │
    │                        │                        │  Show consent screen   │                │
    │                        │◄───────────────────────┤  Return auth code      │                │
    │◄───────────────────────┤                        │                        │                │
    │                        │  POST /oauth/token     │                        │                │
    │                        ├────────────────────────►                        │                │
    │                        │                        │  Exchange for token    │                │
    │                        │◄───────────────────────┤                        │                │
    │◄───────────────────────┤  Return access token   │                        │                │
    │                        │                        │                        │                │
    │  POST /api/gpt/quote/create                     │                        │                │
    │  (with token)          │                        │                        │                │
    ├─────────────────────────────────────────────────►                        │                │
    │                        │                        │  Validate Token        │                │
    │                        │                        ├────────────────────────►                │
    │                        │                        │                        │  Create Quote  │
    │                        │                        │                        ├────────────────►
    │                        │                        │◄───────────────────────┤                │
    │◄────────────────────────────────────────────────┤  Return Quote          │                │
    │  Format response for user                       │                        │                │
```

### 4. Export Flow

```
User Action            Frontend                 API                Export Service        External
    │                     │                       │                       │                  │
    │  Click "Export PDF" │                       │                       │                  │
    ├─────────────────────►                       │                       │                  │
    │                     │  GET /api/quotes/:id  │                       │                  │
    │                     ├───────────────────────►                       │                  │
    │                     │◄──────────────────────┤  Return Quote Data    │                  │
    │                     │  POST /api/export/pdf │                       │                  │
    │                     ├───────────────────────►                       │                  │
    │                     │                       ├───────────────────────►                  │
    │                     │                       │                       │  Generate PDF    │
    │                     │                       │                       │  (PDFKit)        │
    │                     │                       │                       │  Upload to Blob  │
    │                     │                       │                       ├──────────────────►
    │                     │                       │                       │◄─────────────────┤
    │                     │                       │◄──────────────────────┤  Return PDF URL  │
    │                     │◄──────────────────────┤                       │                  │
    │◄────────────────────┤  Download PDF         │                       │                  │
    │  View/Save PDF      │                       │                       │                  │
```

---

## Agent Responsibility Map

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        Level 1: Chief Architect                             │
│                                                                             │
│  Responsibilities:                                                          │
│  • Overall system architecture                                              │
│  • Technology stack selection                                               │
│  • API contract design                                                      │
│  • Quality assurance                                                        │
│  • Integration coordination                                                 │
│  • OpenAI submission management                                             │
│                                                                             │
└─────┬──────────────┬──────────────┬──────────────┬──────────────┬──────────┘
      │              │              │              │              │
┌─────▼─────┐  ┌─────▼─────┐  ┌────▼──────┐  ┌───▼───────┐  ┌──▼────────┐
│Backend    │  │Frontend   │  │Quote      │  │PDF        │  │ChatGPT    │
│Infrastructure││Application│  │Engine     │  │Parser     │  │Integration│
│Agent      │  │Agent      │  │Agent      │  │Agent      │  │Agent      │
└─────┬─────┘  └─────┬─────┘  └────┬──────┘  └───┬───────┘  └──┬────────┘
      │              │              │              │              │
   ┌──┴──┬────┬──┐ ┌─┴──┬────┬──┐ ┌┴──┬────┬──┐ ┌┴──┬────┬──┐ ┌┴──┬────┬──┐
   │API  │DB  │Auth│ │UI  │Form│State│ │Calc│Tmpl│Exp│ │Extr│Map │OCR │ │Schm│Conv│Test│
   │Dev  │Agt │Agt │ │Cmp │Bld │Mgt │ │Eng │Sys │Gen│ │Act │Agt │Agt │ │Agt │Des │Agt │
   │Agt  │    │    │ │Agt │Agt │Agt │ │Agt │Agt │Agt│ │Agt │    │    │ │    │Agt │    │
   └─────┴────┴────┘ └────┴────┴────┘ └────┴────┴───┘ └────┴────┴────┘ └────┴────┴────┘

   (4 Level 3 agents under each Level 2 agent = 24 total)
```

---

## Technology Stack Visual

```
┌────────────────────────────────────────────────────────────────────────┐
│                        FRONTEND STACK                                  │
├────────────────────────────────────────────────────────────────────────┤
│                                                                        │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐    │
│  │  Next.js   │  │TypeScript  │  │  Tailwind  │  │ shadcn/ui  │    │
│  │    14+     │  │    5.0+    │  │    CSS     │  │            │    │
│  └────────────┘  └────────────┘  └────────────┘  └────────────┘    │
│                                                                        │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐    │
│  │  Zustand   │  │   React    │  │    Zod     │  │  Lucide    │    │
│  │  (State)   │  │Hook Form   │  │(Validation)│  │  (Icons)   │    │
│  └────────────┘  └────────────┘  └────────────┘  └────────────┘    │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────────────┐
│                         BACKEND STACK                                  │
├────────────────────────────────────────────────────────────────────────┤
│                                                                        │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐    │
│  │  Next.js   │  │  Prisma    │  │   Vercel   │  │ NextAuth   │    │
│  │ API Routes │  │    ORM     │  │  Postgres  │  │    .js     │    │
│  └────────────┘  └────────────┘  └────────────┘  └────────────┘    │
│                                                                        │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐    │
│  │ pdf-parse  │  │  PDFKit    │  │  ExcelJS   │  │   Resend   │    │
│  │(PDF Parse) │  │ (PDF Gen)  │  │(Excel Gen) │  │  (Email)   │    │
│  └────────────┘  └────────────┘  └────────────┘  └────────────┘    │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────────────┐
│                      EXTERNAL SERVICES                                 │
├────────────────────────────────────────────────────────────────────────┤
│                                                                        │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐    │
│  │   Vercel   │  │   OpenAI   │  │   Sentry   │  │   Vercel   │    │
│  │  (Hosting) │  │  ChatGPT   │  │  (Errors)  │  │   Blob     │    │
│  └────────────┘  └────────────┘  └────────────┘  └────────────┘    │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────────────┐
│                       DEVOPS & TOOLS                                   │
├────────────────────────────────────────────────────────────────────────┤
│                                                                        │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐    │
│  │   GitHub   │  │   GitHub   │  │   Vitest   │  │ Playwright │    │
│  │    Repo    │  │  Actions   │  │  (Tests)   │  │   (E2E)    │    │
│  └────────────┘  └────────────┘  └────────────┘  └────────────┘    │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘
```

---

## File Structure Overview

```
openasapp/
│
├─ src/
│  ├─ app/                          # Next.js App Router
│  │  ├─ (auth)/                    # Auth pages (login, register)
│  │  ├─ (dashboard)/               # Dashboard pages
│  │  │  ├─ quotes/                 # Quote management pages
│  │  │  ├─ templates/              # Template pages
│  │  │  ├─ settings/               # Settings pages
│  │  │  └─ layout.tsx              # Dashboard layout
│  │  ├─ api/                       # API routes
│  │  │  ├─ auth/[...nextauth]/     # NextAuth endpoint
│  │  │  ├─ quotes/                 # Quote endpoints
│  │  │  ├─ templates/              # Template endpoints
│  │  │  ├─ pdf/                    # PDF endpoints
│  │  │  ├─ gpt/                    # GPT Action endpoints
│  │  │  ├─ oauth/                  # OAuth endpoints
│  │  │  └─ upload/                 # File upload
│  │  └─ layout.tsx                 # Root layout
│  │
│  ├─ components/                   # React components
│  │  ├─ ui/                        # Base UI components
│  │  ├─ forms/                     # Form components
│  │  ├─ quote/                     # Quote components
│  │  ├─ pdf/                       # PDF components
│  │  └─ layout/                    # Layout components
│  │
│  ├─ lib/                          # Utility libraries
│  │  ├─ auth/                      # Auth helpers
│  │  ├─ database/                  # Database utilities
│  │  ├─ quote-engine/              # Quote calculation
│  │  ├─ pdf-parser/                # PDF parsing
│  │  ├─ exporters/                 # Export utilities
│  │  └─ validations/               # Zod schemas
│  │
│  ├─ stores/                       # Zustand stores
│  │  ├─ useQuoteStore.ts
│  │  ├─ useUserStore.ts
│  │  └─ useAppStore.ts
│  │
│  └─ types/                        # TypeScript types
│     └─ index.ts
│
├─ prisma/                          # Prisma ORM
│  ├─ schema.prisma                 # Database schema
│  ├─ migrations/                   # Migrations
│  └─ seed.ts                       # Seed data
│
├─ public/                          # Static assets
│  ├─ images/
│  └─ fonts/
│
├─ __tests__/                       # Tests
│  ├─ unit/
│  ├─ integration/
│  └─ e2e/
│
├─ .github/                         # GitHub config
│  └─ workflows/                    # CI/CD
│     └─ main.yml
│
└─ Configuration Files
   ├─ package.json
   ├─ tsconfig.json
   ├─ tailwind.config.ts
   ├─ next.config.js
   ├─ .env.local
   └─ vercel.json
```

---

**Last Updated:** 2025-10-20
**Document Version:** 1.0
